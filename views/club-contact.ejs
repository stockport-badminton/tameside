<%- include('header.ejs') %>
<%- include('nav.ejs') %>

<% if (error || typeof clubrow == 'undefined') { %>
  <div class="container my-5">
    <div class="alert alert-danger" role="alert">
      <i class="fas fa-triangle-exclamation"></i> <strong>Something went wrong</strong>
      <p class="mb-0 mt-2"><%= error %></p>
    </div>
  </div>
<% } else { %>

<!-- Page Header -->
<section class="hero" style="padding: 4rem 2rem 3rem;">
  <h1><i class="fas fa-shield-halved"></i> Club Contact Information</h1>
  <p>Private contact details for league officials and team captains</p>
</section>

<!-- GDPR Warning -->
<section class="gdpr-warning">
  <div class="container">
    <div class="alert alert-warning alert-modern" role="alert">
      <div class="alert-icon">
        <i class="fas fa-lock"></i>
      </div>
      <div class="alert-content">
        <strong>Secure Area - Confidential Information</strong>
        <p class="mb-0 mt-2">
          This page contains personal information protected under GDPR. Access was approved by the Management Committee 
          to replace the physical handbook. All information is strictly confidential and for league use only.
        </p>
      </div>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  </div>
</section>

<!-- Club Information -->
<section class="section">
  <div class="container">
    <div class="row g-4">
      <!-- Club Details Column -->
      <div class="col-lg-5">
        <div class="info-card-main">
          <div class="card-header-custom">
            <i class="fas fa-building"></i>
            <h2><%= clubrow[0].clubName %></h2>
          </div>
          
          <div class="info-section">
            <% if (clubrow[0].venueId == clubrow[0].matchVenueId) { %>
              <!-- Single Venue -->
              <div class="info-block">
                <h3><i class="fas fa-map-marker-alt"></i> Venue</h3>
                <p class="venue-name"><%= clubrow[0].venueName %></p>
                <p class="venue-address"><%= clubrow[0].address %></p>
              </div>
            <% } else { %>
              <!-- Separate Match and Club Venues -->
              <div class="info-block">
                <h3><i class="fas fa-trophy"></i> Match Venue</h3>
                <p class="venue-name"><%= clubrow[0].matchVenueName %></p>
                <p class="venue-address"><%= clubrow[0].matchVenueAddress %></p>
              </div>
              
              <div class="info-block">
                <h3><i class="fas fa-home"></i> Club Venue</h3>
                <p class="venue-name"><%= clubrow[0].venueName %></p>
                <p class="venue-address"><%= clubrow[0].address %></p>
              </div>
            <% } %>
          </div>

          <!-- Officials Section -->
          <div class="officials-section">
            <h3><i class="fas fa-user-tie"></i> Club Officials</h3>
            
            <div class="official-card">
              <div class="official-role">Club Secretary</div>
              <div class="official-name"><%= clubrow[0].clubSecretary %></div>
              <div class="official-contacts">
                <a href="tel:<%= clubrow[0].clubSecTel %>" class="contact-link">
                  <i class="fas fa-phone"></i> <%= clubrow[0].clubSecTel %>
                </a>
                <a href="mailto:<%= clubrow[0].clubSecEmail %>" class="contact-link">
                  <i class="fas fa-envelope"></i> <%= clubrow[0].clubSecEmail %>
                </a>
              </div>
            </div>

            <div class="official-card">
              <div class="official-role">Match Secretary</div>
              <div class="official-name"><%= clubrow[0].matchSecretary %></div>
              <div class="official-contacts">
                <a href="tel:<%= clubrow[0].matchSecTel %>" class="contact-link">
                  <i class="fas fa-phone"></i> <%= clubrow[0].matchSecTel %>
                </a>
                <a href="mailto:<%= clubrow[0].matchSecEmail %>" class="contact-link">
                  <i class="fas fa-envelope"></i> <%= clubrow[0].matchSecEmail %>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Teams Column -->
      <div class="col-lg-7">
        <div class="info-card-main">
          <div class="card-header-custom">
            <i class="fas fa-users"></i>
            <h2>Team Captains</h2>
          </div>
          
          <div class="teams-grid">
            <% clubrow.forEach(function(teamRow){ %>
              <div class="team-captain-card">
                <div class="team-header">
                  <span class="team-badge"><i class="fas fa-shuttle-badminton"></i></span>
                  <h4><%= teamRow.teamName %></h4>
                </div>
                <div class="captain-info">
                  <div class="captain-name">
                    <i class="fas fa-user"></i>
                    <strong><%= teamRow.teamCaptain %></strong>
                  </div>
                  <div class="captain-contacts">
                    <a href="mailto:<%= teamRow.teamCaptainEmail %>" class="contact-link">
                      <i class="fas fa-envelope"></i> <%= teamRow.teamCaptainEmail %>
                    </a>
                    <a href="tel:<%= teamRow.teamCaptainTel %>" class="contact-link">
                      <i class="fas fa-phone"></i> <%= teamRow.teamCaptainTel %>
                    </a>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<% } %>

<%- include('footer.ejs') %>

</body>
</html>